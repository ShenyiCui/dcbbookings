<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Settings</title>
	<!--my own external stylesheets and JS-->
	<link href="../CSS/main.css" rel="stylesheet">
	<script src="../JS/main.js"></script>
	<script src="../JS/GlobalStaticVars.js"></script>
	<!--Imported Stylesheets and JS-->
	<script src="../JS/aws-cognito.js"></script>
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.0.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="../CSS/bootstrap.css">
	<script src="../JS/NicEdit.js" type="text/javascript"></script><!--TextEdit-->
	<script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
	<script src="../JS/nprogress.js"></script>
	<link rel="stylesheet" href="../CSS/nprogress.css">
	<script src="../JS/Jquery UI/jquery-ui.min.js"></script>
	<link rel="stylesheet" href="../JS/Jquery UI/jquery-ui.min.css">
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2.3.2/dist/email.min.js"></script>
	<script type="text/javascript">
	   (function(){
		  emailjs.init("user_CBiuqLZ6Ri8hfxrHaEVYG");
	   })();
	</script>
</head>

<body>

	<!--Loader showing up when the site is loading in-->
	<div id="Loader" class="loader">
		<img width="12.5%" src="../Images/loader.gif">
		<br><br><br><br><br><br><br>
		<p id="loaderTxt"></p>
	</div>

	<div id="settingSideNav">

		<div id="backToMainPage">
			<i onClick="self.location='Make_Booking.html'" class="fa fa-arrow-left imgBtn" aria-hidden="true"></i>
			<p onClick="self.location='Make_Booking.html'" class="imgBtn" style="display: inline-block; margin: 0;">Go Back</p>
			<p class="closebtn" id="closeSideNavSettings" onclick="closeSettingsNav()">&times;</p>
		</div>

		<br><br>

		<div onClick="currentSettingsSlide(1);changeSettingTitle('Account Details');" class="settingsPageBtn imgBtn edit_hover_class">
			<p><i class="fa fa-address-card-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Account Details</p>
			<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
		</div>
		<div onClick="getMyResos();currentSettingsSlide(2);changeSettingTitle('My Resource Settings');" class="settingsPageBtn imgBtn edit_hover_class">
			<p><i class="fa fa-database" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;My Resource Settings</p>
			<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
		</div>
		<br><br>
		<div onClick="currentSettingsSlide(3);changeSettingTitle('Activity');generateHistory(userEmail,'activityHere')" class="settingsPageBtn imgBtn edit_hover_class">
			<p><i class="fa fa-history" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Activity</p>
			<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
		</div>
		<div onClick="currentSettingsSlide(4);changeSettingTitle('My Resource Data Analysis');myResosDataStart();" class="settingsPageBtn imgBtn edit_hover_class">
			<p><i class="fa fa-table" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;My Resource Analysis</p>
			<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
		</div>
		<br><br>
		
		<div id="teacherNAdminSettings">
			<div onClick="generateUserManagementTable();currentSettingsSlide(5);changeSettingTitle('User Management');" class="settingsPageBtn imgBtn edit_hover_class">
				<p><i class="fa fa-users" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;User Management</p>
				<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
			</div>
			<div onClick="generateMilestoneTable(); currentSettingsSlide(6); changeSettingTitle('Change Current Week &nbsp;<i onClick=\'showHelpMessageCW()\' class=\'fa fa-question-circle imgBtn\' aria-hidden=\'true\'></i>');" class="settingsPageBtn imgBtn edit_hover_class">
				<p><i class="fa fa-sliders" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Change Current Week</p>
				<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
			</div>
			<br><br>
		</div>
		
		<div id="adminSettings">
			<div onClick="currentSettingsSlide(7);generateAdminTable();changeSettingTitle('Admin Users');" class="settingsPageBtn imgBtn edit_hover_class">
				<p><i class="fa fa-user-md" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Admin Users</p>
				<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
			</div>
			<br><br>
			<div onClick="generateAllResosSettings();currentSettingsSlide(8);changeSettingTitle('All Resources Settings');" class="settingsPageBtn imgBtn edit_hover_class">
				<p><i class="fa fa-database" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;All Resources Settings</p>
				<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
			</div>
			<div onClick="generateAllUsers();currentSettingsSlide(9);changeSettingTitle('User\'s Activity');" class="settingsPageBtn imgBtn edit_hover_class">
				<p><i class="fa fa-history" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;User's Activity</p>
				<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
			</div>
			<div onClick="allResosDataStart();currentSettingsSlide(10);changeSettingTitle('All Resource\'s Data Analysis');" class="settingsPageBtn imgBtn edit_hover_class">
				<p><i class="fa fa-table" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;All Resource's Analysis</p>
				<p align="right"><a><i class="fa fa-sign-in" aria-hidden="true"></i></a></p>
			</div>
		</div>
	</div>

	<div id="mainSettingsPanel">
		<div id="settingsTitleCard">
			<div style="margin-top: 5px;" id="HiddenMenuBtn"><i onClick="openSettingsNav();" class="fa fa-bars imgBtn"></i></div>
			<p align="center" id="SettingsTitleP">Account Details</p>
			<label align = "right"></label>
		</div>

		<!--Account Details 1-->
		<div class="SettingsSlide">
			<div id="AccDetailsDiv" class="accDetails">
				<div class="row">
					<div class="column">
						<p id="emailOfUserP">User Email: ...</p>
						<p id="accountStatusP">Account Status: </p>
						<p id="accountCredentialsP">Account Credentials: </p>
						<p id="credStatus">Credential Status: ...</p>
						<p id="superUserP">Master Admin: </p>
				  	</div>
				  	<div class="column">
						<p id="noOfBMResosP">No. Of Bookmarked Resources: </p>
						<p id="noOfCreatedResosP">No. Of Created Resources: </p>
				  	</div>
				</div>
			</div>
			<br><br>
			<div id="ChangeCredentialsDiv" class="accDetails">
				<div class="row">
					<div class="column">
						<h3>Change Account Password</h3>
						<input id="oldPass" type="password" placeholder="Old Password"><br>
						<input id="newPass" type="password" placeholder="New Password"><br>
						<input id="confirmNewPass" type="password" placeholder="Confirm New Password"><br>
						<button class="btnSuccessOutline" onClick="confirmAndChangePass();">Change Password</button>
						<p id="passChangeMsg" style="margin:0;">&nbsp;</p>
				  	</div>
				  	<div class="column">
						<h3>Change User Credentials</h3>
						<select style="width: 100%" id="userCredentialsSelect">
							<option value="NIL">Choose a New Credential</option>
							<option value="Teacher">Teacher</option>
							<option value="Student">Student</option>
						</select>
						<br><br><br><br>
						<p style="margin: 0;" id="ChangeCredsMsg">&nbsp;</p>
						<button style="width: 100%; margin: 0;" onClick="ChangeUserCreds();" class="btnSuccessOutline" >Change User Credentials</button>
						<br>
						<h3 style="margin:11px 0px 0px 0px;">Delete My Account</h3>
						<button style="width: 100%;" class="btnDangerOutline">Delete Account</button>
				  	</div>
				</div>
			</div>
		</div>
		<!--My Resources 2-->
		<div class="SettingsSlide">
			<center>
				<input type="text" id="searchResosInput" onkeyup="searchMyResos()" placeholder="Search Resources..."><br><br>
				<ul id="myResosList" class="listOfItemsButtons"></ul>
			</center>
		</div>

		<!--History 3-->
		<div class="SettingsSlide">
			<div id="activityslideDivID" class="searchActivityDiv">
				<center>
					<input type="text" id="searchActivityInput" onChange="searchMyActivity()" placeholder="Search Activity..." class="datepicker">
				</center>
			</div>
			<br><br>
			<div id="activityHere"></div>
		</div>
		<!--My Resource Data 4-->
		<div class="SettingsSlide">
			<div class="sectionedSettingsDiv">
				<br>
				<p style="font-size:18px;" align="center">Pick a resource and indicate the data range:</p>
				<br>
				<center>
					<p></p>
					<div class="sameLine">
						<label>Pick a resource:
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</label><br>
						<div id="MyResosDataSelectDiv" class="sameLine">
							<select id="MyResosDataSelect" class="smallInput smallPadding">
								<option>Loading...</option>
							</select>
						</div>
						&nbsp;&nbsp;&nbsp;
					</div>

					<div class="sameLine">
						<label>Start From:
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</label><br>
						<input onChange="findWkBegin('MyResosDateStart');" id="MyResosDateStart" class="smallInput datepicker smallPadding">
						&nbsp;&nbsp;&nbsp;
					</div>

					<div class="sameLine">
						<label>End At:
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</label><br>
						<input onChange="findWkBegin('MyResosDateEnd');" id="MyResosDateEnd" class = "smallInput datepicker smallPadding">
						&nbsp;&nbsp;&nbsp;
					</div>
					<br>
					<button class="btnSuccessOutline largerWidthButton" onClick="startCalculationOfMyResos('canvasHere','My');">Calculate Data</button>
					<br><br>
				</center>
			</div>
			<br><br>
			<div id="canvasHere" class="sectionedSettingsDiv">
				
			</div>
			<br><br>
		</div>
		
		<!--User Management 5-->
		<div class="SettingsSlide">
			
			<div class="sectionedDivNoColor">
				<input style="width: 100%;" type="text" id="searchUsersDB" onkeyup="searchUserDBTable()" placeholder="Search users...">
				<br><br>
				<h3 style="margin:0px 0px 10px 0px;">Filter users by:</h3>
				<select style="margin: 0; width: 100%; padding: 10px;" id="usersFilterInfo" onChange="FilterUserDBTable($('#usersFilterInfo').val())">
					<option value="NIL">Show all Users</option>
					<option value="pending">Show pending Users</option>
					<option value="confirmed">Show confirmed Users</option>
					<option value="Teacher">Show only Teachers</option>
					<option value="Student">Show only Students</option>
				</select>
			</div>
			<div class="sectionedDivNoColor">
				<br><br>
				<div id="userManagementTable"><p align="center"><em>Loading...</em></p></div>
			</div>
			<br><br>
		</div>
		<!--Change Current Week 6-->
		<div class="SettingsSlide">
			<div id="addAMilestone" class="sectionedSettingsDiv">
				<br>
				<p style="font-size:18px;" align="center">Add a Milestone</p>
				<br>
				<center>
					<p id="milestoneErrMsg" ></p>
					<div class="sameLine">
						<label>Pick a Date:
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</label><br>
						<input id="pickADate" onchange="WeekBeginMilestone();" class="datepicker smallInput">
						&nbsp;&nbsp;&nbsp;
					</div>

					<div class="sameLine">
						<label>Week Begining:
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;
						</label><br>
						<input id="WBChosen" class="smallInput">
						&nbsp;&nbsp;&nbsp;
					</div>

					<div class="sameLine">
						<label>It's a week:
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</label><br>
						<input id="WBWeekNum" class="smallInput" min="1" max="2" type="number">
						&nbsp;&nbsp;&nbsp;
					</div>
					<br>
					<button class="btnSuccessOutline largerWidthButton" id="createMilestoneBtn">Create Milestone</button>
					<br><br>
				</center>
			</div>
			<br>
			<div id="currentMilestones">
				<p style="font-size:18px;" align="center">Current Milestones</p>
				<br>
				<p align="center" id="currentWeekTxt">Currently it is a week: #
				&nbsp;&nbsp;&nbsp;&nbsp;
				<a href="#">Alternate Now</a>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				</p>
				<br><br>
				<center>
					<div id="currentMSTable"><em>[Processing Data...]</em></div>
				</center>
				<br><br>
			</div>
		</div>
		
		<!--Admin Users 7-->
		<div class="SettingsSlide">
			<center>
				<input type="text" placeholder="Email" id="emailInput">
				<br>
				<button class="btnSuccessOutline" id="addUserBtn">Add User</button>
				<br><br><br>
				<div id="AdminUserTable"></div>
			</center>
		</div>
		
		<!--All Resources 8-->
		<div class="SettingsSlide">
			<center>
				<input type="text" id="searchAllResosInput" onkeyup="searchAllResos()" placeholder="Search Resources..."><br><br>
				<ul id="AllResosList" class="listOfItemsButtons"></ul>
			</center>
		</div>
		<!--User Data Analysis 9-->
		<div class="SettingsSlide">
			
			<div id="allactivityslideDivID" class="searchActivityDiv">
				<center>
					<input type="text" id="searchAllUsers" onkeyup="searchAllUsersForActivity()" placeholder="Search Users..."><br><br>
					<ul style="height: 100px;" id="AllUsersList" class="listOfItemsButtons"></ul>
					<input type="text" id="searchAllActivityInput" onChange="searchAllActivity()" placeholder="Search Activity..." class="datepicker">
				</center>
			</div>
			<br><br>
			<div style="margin-top: 200px;" id="putAllUserActivityHere">
			</div>
		</div>
		<!--Resource Data Analysis 10-->
		<div class="SettingsSlide">
			<div class="sectionedSettingsDiv">
				<br>
				<p style="font-size:18px;" align="center">Pick a resource and indicate the data range:</p>
				<br>
				<center>
					<p></p>
					<div class="sameLine">
						<label>Pick a resource:
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</label><br>
						<div id="AllResosDataSelectDiv" class="sameLine">
							<select id="AllResosDataSelect" class="smallInput smallPadding">
								<option>Loading...</option>
							</select>
						</div>
						&nbsp;&nbsp;&nbsp;
					</div>

					<div class="sameLine">
						<label>Start From:
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</label><br>
						<input onChange="findWkBegin('AllResosDateStart');" id="AllResosDateStart" class="smallInput datepicker smallPadding">
						&nbsp;&nbsp;&nbsp;
					</div>

					<div class="sameLine">
						<label>End At:
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</label><br>
						<input onChange="findWkBegin('AllResosDateEnd');" id="AllResosDateEnd" class = "smallInput datepicker smallPadding">
						&nbsp;&nbsp;&nbsp;
					</div>
					<br>
					<button class="btnSuccessOutline largerWidthButton" onClick="startCalculationOfMyResos('canvasAllResos','All');">Calculate Data</button>
					<br><br>
				</center>
			</div>
			<br><br>
			<div id="canvasAllResos" class="sectionedSettingsDiv">
				
			</div>
			<br><br>
		</div>
	</div>

	<div id="resosSettingsModal" class="Modal">
		<!--resosSettingsModal Modal content -->
		<div class="resosSettingsModal-content">
			<span id="resosSettingsModalCloseBtn" class="Modalclose">&times;</span>
			<h3 id="settingsTitle" align="center">Technology 1: Room Settings</h3>

			<div id="viewResosInfo">
				<label>Resource ID (non-editable):</label>
				<input type="text" id="resosIDval" readonly disabled>

				<label>Department</label>
				<input type="text" id="departmentVal">

				<label>Description</label>
				<textarea id="DescriptionVal"></textarea>

				<br>
				<select id="accessRightSelect" class="select100">
					<option value="invalid">Access Rights:</option>
					<option value="Student">Make room available to Students ONLY</option>
					<option value="Teacher">Make room available to Teachers ONLY</option>
					<option value="TeacherStudent">Make room available to both Teachers and Students</option>
				</select>
				<br><br>
				<select id="bookingRightSelect" class="select100">
					<option value="invalid">Booking Rights:</option>
					<option value="NoValidation">No validation required for user to book periods</option>
					<option value="StudentValidation">Make ONLY students validate their bookings with admin users</option>
					<option value="AllValidation">Make ALL users validate their bookings with admin users</option>
				</select>
				<br><br>

				<label>Room Admin (non-editable):</label>
				<input type="text" id="RoomAdmin1" name="Admin1" readonly disabled>

				<label>Other Admins <em>[ Separate room admins emails with a ' ; ' ]  OPTIONAL </em></label>
				<input type="text" id="RoomAdmin2" placeholder="Other Admins [ Enter Emails ]:" name="Admin2">
				<br>
				<input type="checkbox" id="planAheadCB">
				<label>&nbsp;Plan Ahead [Close booking ability 30 minutes ahead of time]</label>
				<br>
				<input type="checkbox" disabled id="30MinPeriodCB">
				<label>&nbsp;30 minute period [Split each period into 30 minute sections]</label>

				<br><br><br>
				<strong><label>Upload New Schedule:</label></strong>
				<center>
					<!--The upload options-->
					<div id="Options">
						<strong><label>Choose a upload source:</label></strong>
						<label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
						<strong><label>Choose a upload method:</label></strong>
						<br>

						<select onChange="checkAvailableUpload(); settingsUploadTable=[];" id="uploadSource">
							<option selected value="invalid">UPLOAD SOURCE...</option>
							<option value="sims">SIMS</option>
							<option value="custom">CUSTOM</option>
						</select>

						<label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>

						<select onChange="checkAvailableUpload();settingsUploadTable = []" id="uploadMethods">
							<option selected value="invalid">UPLOAD METHOD...</option>
							<option disabled value="merge">MERGE</option>
							<option value="override">OVERRIDE</option>
						</select>

						<label>&nbsp;&nbsp;&nbsp;&nbsp;</label>
					</div>
					<!--If Cutom upload is chosen the doc will show-->
					<div id="customUploadDocs">
						<br><br>
						<a href="../Documents/SE21_Upload_Template.zip" target="_blank">Download Template</a>
						<label>&nbsp;||&nbsp;</label>
						<a href="../Documents/SE21_README_UserDoc.pdf" target="_blank">Read User Documentation</a>
						<label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
					</div>
					<!--If SIm upload is chosen the doc will show-->
					<div id="SimUploadDocs">
						<br><br>
						<em><label>[Save SIMS file as .CSV with UTF-8] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label></em>
					</div>
				</center>
				<br><br>
				<form id="fileLoadForm">
					<input id="fileToLoad" type="file" accept=".csv" onChange="">
				</form>


					<div id="PreviewTable">
						<br><br><br>
						<em><p align="center">[Preview Table]</p></em>
					</div>


				<div id="resosSettingsDangerZone">
					<h3>Danger Zone</h3>
					<button id="deleteResos" class="btnDangerOutline" style="border-radius:5px;">Delete This Resource</button>
				</div>

				<button class="createResosBtn" id="saveResosChanges" onClick="resosSaveChanges();">Save Changes</button>
				<label id="resosSettingsErrMsg"></label>
			</div>

			<div id="resosSettingsLoader">
				<br><br><br><br><br><br><br><br><br><br><br><br>
				<center>
					<img width="10%" src="../Images/loader.gif">
				</center>
			</div>
		</div>
	</div>
	
	<div id="emailModalz" class="HigherModal"> <!--email module, its at a higher z-index than everyone-->
		<div class="emailModal-content">
			<span id="emailModalCloseBtn" class="close1">&times;</span>
			<input disabled type="email" id="toEmail"><br>
			<input placeHolder="Subject" type="text" id="subject">
			<textarea id="emailText"></textarea>
			<button id="sendBtn" class="buttonSmallLong" onclick="sendMailMyResosData()">Send</button>
			<p id="emailErrMsg">&nbsp;</p>
		</div>
	</div>
		

</body>

<script>//initilizers
	FunnyloadingTxt("loaderTxt",true,2000);
	$( function()//initializing datepicker
	{
    	$(".datepicker").datepicker({
			dateFormat: 'D, dd M yy'
		});
  	});

	//autoscalers to make sure that the panel widths match
	if ($(window).width() < 1280 && $(window).width() >= 1150)
	{
		openSettingsNav()
	}
	else if($(window).width() >= 1280)
	{
		openSettingsNav()
	}
	else if($(window).width() <= 1150)
	{
		closeSettingsNav()
	}
	$(window).resize(function()
	{
		if ($(window).width() < 1280 && $(window).width() >= 1150)
		{
			openSettingsNav()
		}
		else if($(window).width() >= 1280)
		{
			openSettingsNav()
		}
		else if($(window).width() <= 1150)
		{
			closeSettingsNav()
		}
	});

	NProgress.configure({ showSpinner: false });
	NProgress.start();
	getUserEmail();
	validateEmail();
	//calculateDATA("Technology 1","room",["Mon, 28 Oct 2019","Mon, 27 Apr 2020"]);
	function validateEmail()//get the email of the user
	{
		if(userEmail!=null)
		{
			getAllAdmins()
			validateAdminFetch()
			NProgress.inc();
		}
		else
		{
			window.setTimeout(validateEmail,1000);
		}
	}
	function validateAdminFetch()//get all admin users
	{
		if(allMasterAdmins.length!=0)
		{
			checkIfResosExists()
			validateCheckIfExistandDelete();
			NProgress.inc();
		}
		else
		{
			window.setTimeout(validateAdminFetch,1000);
		}
	}
	function validateCheckIfExistandDelete()//makes sure the current user info is the most up to dataEmail
	{
		if(resosExistCheckAndDeleteComplete == true)
		{
			NProgress.inc();
			checkIfAdmin()
			NProgress.done();
			$("#Loader").fadeOut();
		}
		else
		{
			window.setTimeout(validateCheckIfExistandDelete,1000);
		}
	}
	function checkIfAdmin()//see if you are an admin
	{
		openedSettingsCheckPrelim();
		loadInAccDetails();
		for(var i = 0; i<allMasterAdmins.length; i++)
		{
			if(userEmail.trim().toLowerCase()==allMasterAdmins[i].trim().toLowerCase())
			{
				masterAdmin= true;
			}
		}
		if(masterAdmin)
		{
			$("#adminSettings").show();
		}
		else
		{
			$("#adminSettings").hide();
		}
		individualData = null;
		getUserInfo(userEmail);
		validateIndiFetch();
	}
	function validateIndiFetch()
	{
		if(individualData!=null)
		{
			checkIfTeacher();
			loadInAccDetails();
		}
		else
		{
			window.setTimeout(validateIndiFetch,1000)
		}
	}
	function checkIfTeacher()//see if you are a teacher
	{
		if((individualData.Items[0].credentialStatus == "confirmed" && individualData.Items[0].rolez == "Teacher") || masterAdmin)
		{
			$("#teacherNAdminSettings").show();
		}
	}
</script>
<script>//Resos Settings SLide Code
	settingsSlideIndex = 1;
	showSettingsSlides(settingsSlideIndex);
	// Next/previous controls
	function plusSettingsSlides(n)
	{
		showSettingsSlides(settingsSlideIndex += n);
	}

	// Thumbnail image controls
	function currentSettingsSlide(n)
	{
		showSettingsSlides(settingsSlideIndex = n);
	}

	function showSettingsSlides(n)
	{
		var i;
		var settingsSlides = document.getElementsByClassName("SettingsSlide");
		if (n > settingsSlides.length) {settingsSlideIndex = 1}
		if (n < 1) {settingsSlideIndex = settingsSlides.length}
		for (i = 0; i < settingsSlides.length; i++) {
			settingsSlides[i].style.display = "none";
		}
		settingsSlides[settingsSlideIndex-1].style.display = "block";
	}

</script>
<script>//resos settings modal code
	var resosSettingsModal = document.getElementById("resosSettingsModal");

	// Get the <span> element that closes the modal
	var closeresosSettingsBtn = document.getElementById("resosSettingsModalCloseBtn");

	// When the user clicks the button, open the modal
	function openResosSettingsModal()
	{
		resosSettingsModal.style.display = "block";
		$("#saveResosChanges").show();
	}
	function closeResosSettingsModal()
	{
		resosSettingsModal.style.display = "none";
	}

	// When the user clicks on <span> (x), close the modal
	closeresosSettingsBtn.onclick = function()
	{
		resosSettingsModal.style.display = "none";
	}
	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event)
	{
		if (event.target == resosSettingsModal)
		{
			resosSettingsModal.style.display = "none";
		}
		else if (event.target == emailModal)
		{
			emailModal.style.display = "none";
		}
	}
</script>
<script>
	function showHelpMessageCW()//will show a help modal containing information on the Change Week Settings
	{
		$.alert
		({
			theme: 'modern',
			boxWidth: '700px',
    		useBootstrap: false,
			icon: 'fa fa-question-circle',
			title: "<strong><p class=\"indent\">How it works:</p></strong>",
			content: "<p class=\"indent\">The school operates on a bi-weekly system where the timetable changes every week, returning back to its original state every alternate week."+
			"Hence, you see \"Week 1\" and \"Week 2\" in the timetable modal, indicating the current week's timetable its currently showing."+
			"<br><br> The problem however, is that due to the schedule of holidays the schedule of weeks are not always alternating. "+
			"Use this panel to set <em>milestones</em> which are dates where the week will automatically change to a different week, resetting the alternation cycle. "+
			"<br><br>Alternatively you can also simply click the button to change the current week you are on now, also resetting the alternation cycle.</p>",
		});
	}
</script>
<script>//email modal code
	var emailModal = document.getElementById("emailModalz");

	// Get the <span> element that closes the modal
	var closeEmailModalBtn = document.getElementById("emailModalCloseBtn");

	// When the user clicks the button, open the modal
	function openEmailModal()
	{
		emailModal.style.display = "block";
	}
	function closeEmailModal()
	{
		emailModal.style.display = "none";
	}

	// When the user clicks on <span> (x), close the modal
	closeEmailModalBtn.onclick = function()
	{
		emailModal.style.display = "none";
	}
	
	//openEmailModal();
</script>
<script>//custom select element code
	var x, i, j, selElmnt, a, b, c;
	/* Look for any elements with the class "custom-select": */
	x = document.getElementsByClassName("custom-select");
	for (i = 0; i < x.length; i++) {
	  selElmnt = x[i].getElementsByTagName("select")[0];
	  /* For each element, create a new DIV that will act as the selected item: */
	  a = document.createElement("DIV");
	  a.setAttribute("class", "select-selected");
	  a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
	  x[i].appendChild(a);
	  /* For each element, create a new DIV that will contain the option list: */
	  b = document.createElement("DIV");
	  b.setAttribute("class", "select-items select-hide");
	  for (j = 1; j < selElmnt.length; j++) {
		/* For each option in the original select element,
		create a new DIV that will act as an option item: */
		c = document.createElement("DIV");
		c.innerHTML = selElmnt.options[j].innerHTML;
		c.addEventListener("click", function(e) {
			/* When an item is clicked, update the original select box,
			and the selected item: */
			var y, i, k, s, h;
			s = this.parentNode.parentNode.getElementsByTagName("select")[0];
			h = this.parentNode.previousSibling;
			for (i = 0; i < s.length; i++) {
			  if (s.options[i].innerHTML == this.innerHTML) {
				s.selectedIndex = i;
				h.innerHTML = this.innerHTML;
				y = this.parentNode.getElementsByClassName("same-as-selected");
				for (k = 0; k < y.length; k++) {
				  y[k].removeAttribute("class");
				}
				this.setAttribute("class", "same-as-selected");
				break;
			  }
			}
			h.click();
		});
		b.appendChild(c);
	  }
	  x[i].appendChild(b);
	  a.addEventListener("click", function(e) {
		/* When the select box is clicked, close any other select boxes,
		and open/close the current select box: */
		e.stopPropagation();
		closeAllSelect(this);
		this.nextSibling.classList.toggle("select-hide");
		this.classList.toggle("select-arrow-active");
	  });
	}

	function closeAllSelect(elmnt) {
	  /* A function that will close all select boxes in the document,
	  except the current select box: */
	  var x, y, i, arrNo = [];
	  x = document.getElementsByClassName("select-items");
	  y = document.getElementsByClassName("select-selected");
	  for (i = 0; i < y.length; i++) {
		if (elmnt == y[i]) {
		  arrNo.push(i)
		} else {
		  y[i].classList.remove("select-arrow-active");
		}
	  }
	  for (i = 0; i < x.length; i++) {
		if (arrNo.indexOf(i)) {
		  x[i].classList.add("select-hide");
		}
	  }
	}

	/* If the user clicks anywhere outside the select box,
	then close all select boxes: */
	document.addEventListener("click", closeAllSelect);
</script>
</html>
